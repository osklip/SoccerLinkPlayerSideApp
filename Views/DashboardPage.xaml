<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:SoccerLinkPlayerSideApp.ViewModels"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="SoccerLinkPlayerSideApp.Views.DashboardPage"
             Title="Dashboard"
             BackgroundColor="#F0F2F5">

    <Grid RowDefinitions="Auto, *" Padding="20" RowSpacing="20">
        <VerticalStackLayout Grid.Row="0" Spacing="5">
            <Label Text="{Binding WelcomeMessage}" FontSize="24" TextColor="#2A5670" FontAttributes="Bold"/>
            <Label Text="TwÃ³j panel sterowania" TextColor="Gray" FontSize="14"/>
        </VerticalStackLayout>

        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="20">

                <Label Text="NajbliÅ¼sze wydarzenie" FontAttributes="Bold" TextColor="Black" Margin="0,10,0,0"/>

                <Border IsVisible="{Binding HasNearestEvent}" StrokeShape="RoundRectangle 15" BackgroundColor="{Binding NearestEvent.Color}" StrokeThickness="0" Padding="0">
                    <Grid ColumnDefinitions="15, *, Auto" BackgroundColor="White">
                        <BoxView Grid.Column="0" Color="{Binding NearestEvent.Color}" VerticalOptions="Fill"/>

                        <VerticalStackLayout Grid.Column="1" Padding="15" Spacing="5">
                            <Label Text="{Binding NearestEvent.Title}" FontAttributes="Bold" FontSize="18" TextColor="#2A5670"/>
                            <Label Text="{Binding NearestEvent.Description}" TextColor="Gray" FontSize="14"/>
                            <Label Text="{Binding NearestEvent.Date, StringFormat='{0:dd MMMM, godz. HH:mm}'}" TextColor="Black" FontAttributes="Bold"/>
                        </VerticalStackLayout>

                        <Label Grid.Column="2" Text="{Binding NearestEvent.Icon}" FontSize="30" VerticalOptions="Center" Margin="0,0,20,0"/>
                    </Grid>
                </Border>

                <Border IsVisible="{Binding HasNearestEvent, Converter={StaticResource InvertedBoolConverter}}" StrokeShape="RoundRectangle 15" BackgroundColor="White" StrokeThickness="0" Padding="20">
                    <VerticalStackLayout HorizontalOptions="Center" Spacing="5">
                        <ActivityIndicator IsRunning="{Binding IsLoadingEvent}" IsVisible="{Binding IsLoadingEvent}" Color="#2A5670"/>
                        <Label Text="Brak nadchodzÄ…cych wydarzeÅ„" TextColor="Gray" IsVisible="{Binding IsLoadingEvent, Converter={StaticResource InvertedBoolConverter}}"/>
                    </VerticalStackLayout>
                </Border>

                <Label Text="Menu" FontAttributes="Bold" TextColor="Black" Margin="0,10,0,0"/>

                <Grid ColumnDefinitions="*,*" RowDefinitions="120, 120" ColumnSpacing="15" RowSpacing="15">

                    <Border Grid.Row="0" Grid.Column="0" BackgroundColor="White" StrokeShape="RoundRectangle 15" StrokeThickness="0">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding GoToMessagesCommand}"/>
                        </Border.GestureRecognizers>
                        <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="10">
                            <Label Text="âœ‰ï¸" FontSize="30"/>
                            <Label Text="WiadomoÅ›ci" TextColor="#2A5670" FontAttributes="Bold"/>
                        </VerticalStackLayout>
                    </Border>

                    <Border Grid.Row="0" Grid.Column="1" BackgroundColor="White" StrokeShape="RoundRectangle 15" StrokeThickness="0">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding GoToStatsCommand}"/>
                        </Border.GestureRecognizers>
                        <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="10">
                            <Label Text="ðŸ“Š" FontSize="30"/>
                            <Label Text="Statystyki" TextColor="#2A5670" FontAttributes="Bold"/>
                        </VerticalStackLayout>
                    </Border>

                    <Border Grid.Row="1" Grid.Column="0" BackgroundColor="White" StrokeShape="RoundRectangle 15" StrokeThickness="0">
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding GoToCalendarCommand}"/>
                        </Border.GestureRecognizers>
                        <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="10">
                            <Label Text="ðŸ“…" FontSize="30"/>
                            <Label Text="Terminarz" TextColor="#2A5670" FontAttributes="Bold"/>
                        </VerticalStackLayout>
                    </Border>

                    <Border Grid.Row="1" Grid.Column="1" BackgroundColor="#F5F5F5" StrokeShape="RoundRectangle 15" StrokeThickness="0" Opacity="0.5">
                        <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center">
                            <Label Text="ðŸ”œ" FontSize="30"/>
                            <Label Text="WkrÃ³tce" TextColor="Gray"/>
                        </VerticalStackLayout>
                    </Border>

                </Grid>

                <Button Text="Wyloguj" Command="{Binding LogoutCommand}" BackgroundColor="#E74C3C" TextColor="White" Margin="0,20,0,0"/>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>

    <ContentPage.Resources>
        <ResourceDictionary>
            <toolkit:InvertedBoolConverter x:Key="InvertedBoolConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
</ContentPage>